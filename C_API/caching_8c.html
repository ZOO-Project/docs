<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZOO-Project: caching.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZOO-Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">caching.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;openssl/md5.h&gt;</code><br />
<code>#include &lt;openssl/evp.h&gt;</code><br />
<code>#include &quot;<a class="el" href="service_8h_source.html">service.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="service__internal_8h_source.html">service_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="response__print_8h_source.html">response_print.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="caching_8h_source.html">caching.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8e88258fbad0c34118ec68ef84688098"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#a8e88258fbad0c34118ec68ef84688098">getMd5</a> (char *url)</td></tr>
<tr class="memdesc:a8e88258fbad0c34118ec68ef84688098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute md5.  <a href="caching_8c.html#a8e88258fbad0c34118ec68ef84688098">More...</a><br /></td></tr>
<tr class="separator:a8e88258fbad0c34118ec68ef84688098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae419a5533a6ddaa6f753d91c7e76f71d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#ae419a5533a6ddaa6f753d91c7e76f71d">getMd5f</a> (char *file)</td></tr>
<tr class="memdesc:ae419a5533a6ddaa6f753d91c7e76f71d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute md5 of a file.  <a href="caching_8c.html#ae419a5533a6ddaa6f753d91c7e76f71d">More...</a><br /></td></tr>
<tr class="separator:ae419a5533a6ddaa6f753d91c7e76f71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1674744571ba9c0932783cc74d2c0d29"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#a1674744571ba9c0932783cc74d2c0d29">getFilenameForRequest</a> (<a class="el" href="service_8h.html#structmaps">maps</a> *conf, const char *request)</td></tr>
<tr class="memdesc:a1674744571ba9c0932783cc74d2c0d29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a URL by appending every request header listed in the security section.This imply that the URL will contain any authentication informations that should be fowarded to the server from which de input was download.  <a href="caching_8c.html#a1674744571ba9c0932783cc74d2c0d29">More...</a><br /></td></tr>
<tr class="separator:a1674744571ba9c0932783cc74d2c0d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28466f80bf8485078d2c516b162cfc2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#aa28466f80bf8485078d2c516b162cfc2">storeMd5</a> (char *file)</td></tr>
<tr class="separator:aa28466f80bf8485078d2c516b162cfc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0f57463a06fcec67c66c97b70b3a26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#a2a0f57463a06fcec67c66c97b70b3a26">cacheFile</a> (<a class="el" href="service_8h.html#structmaps">maps</a> *conf, char *request, char *mimeType, int <a class="el" href="service__loader_8c.html#a58c1cb56a392e72402ca2384bab50361">length</a>, char *filename)</td></tr>
<tr class="memdesc:a2a0f57463a06fcec67c66c97b70b3a26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache a file for a given request.  <a href="caching_8c.html#a2a0f57463a06fcec67c66c97b70b3a26">More...</a><br /></td></tr>
<tr class="separator:a2a0f57463a06fcec67c66c97b70b3a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79b15ef33b26196e6a65de6faf5cf3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#ad79b15ef33b26196e6a65de6faf5cf3f">addToCache</a> (<a class="el" href="service_8h.html#structmaps">maps</a> *conf, char *request, char *<a class="el" href="main__conf__read_8y.html#a0adbaa568d951cc05630f0e44dddaa7f">content</a>, char *mimeType, int <a class="el" href="service__loader_8c.html#a58c1cb56a392e72402ca2384bab50361">length</a>, char *filepath, size_t max_path)</td></tr>
<tr class="memdesc:ad79b15ef33b26196e6a65de6faf5cf3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache a file for a given request.  <a href="caching_8c.html#ad79b15ef33b26196e6a65de6faf5cf3f">More...</a><br /></td></tr>
<tr class="separator:ad79b15ef33b26196e6a65de6faf5cf3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a75c69161fcac7669b9f061c9289d8e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#a5a75c69161fcac7669b9f061c9289d8e">isInCache</a> (<a class="el" href="service_8h.html#structmaps">maps</a> *conf, char *request)</td></tr>
<tr class="memdesc:a5a75c69161fcac7669b9f061c9289d8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify if a url is available in the cache.  <a href="caching_8c.html#a5a75c69161fcac7669b9f061c9289d8e">More...</a><br /></td></tr>
<tr class="separator:a5a75c69161fcac7669b9f061c9289d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f8baf18bdee0d5f398c562ac3a625d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#ac4f8baf18bdee0d5f398c562ac3a625d">readCurrentInput</a> (<a class="el" href="service_8h.html#structmaps">maps</a> **m, <a class="el" href="service_8h.html#structmaps">maps</a> **in, int *index, <a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *hInternet, <a class="el" href="service_8h.html#structmap">map</a> **error)</td></tr>
<tr class="memdesc:ac4f8baf18bdee0d5f398c562ac3a625d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the downloaded file for a specific input.  <a href="caching_8c.html#ac4f8baf18bdee0d5f398c562ac3a625d">More...</a><br /></td></tr>
<tr class="separator:ac4f8baf18bdee0d5f398c562ac3a625d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac328b98c3b060240d2a22d9569572fd4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#ac328b98c3b060240d2a22d9569572fd4">runHttpRequests</a> (<a class="el" href="service_8h.html#structmaps">maps</a> **m, <a class="el" href="service_8h.html#structmaps">maps</a> **inputs, <a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *hInternet, <a class="el" href="service_8h.html#structmap">map</a> **error)</td></tr>
<tr class="memdesc:ac328b98c3b060240d2a22d9569572fd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Effectively run all the HTTP requests in the queue.  <a href="caching_8c.html#ac328b98c3b060240d2a22d9569572fd4">More...</a><br /></td></tr>
<tr class="separator:ac328b98c3b060240d2a22d9569572fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fee7fa61f6d29e7cefc2617a1aa3281"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#a8fee7fa61f6d29e7cefc2617a1aa3281">addRequestToQueue</a> (<a class="el" href="service_8h.html#structmaps">maps</a> **m, <a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *hInternet, const char *url, bool req)</td></tr>
<tr class="memdesc:a8fee7fa61f6d29e7cefc2617a1aa3281"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a request in the download queue.  <a href="caching_8c.html#a8fee7fa61f6d29e7cefc2617a1aa3281">More...</a><br /></td></tr>
<tr class="separator:a8fee7fa61f6d29e7cefc2617a1aa3281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa0e0771ad3aa131f09d9334e6c8d617"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="caching_8c.html#aaa0e0771ad3aa131f09d9334e6c8d617">loadRemoteFile</a> (<a class="el" href="service_8h.html#structmaps">maps</a> **m, <a class="el" href="service_8h.html#structmap">map</a> **<a class="el" href="main__conf__read_8y.html#a0adbaa568d951cc05630f0e44dddaa7f">content</a>, <a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *hInternet, char *url)</td></tr>
<tr class="memdesc:aaa0e0771ad3aa131f09d9334e6c8d617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to load file from cache or download a remote file if not in cache.  <a href="caching_8c.html#aaa0e0771ad3aa131f09d9334e6c8d617">More...</a><br /></td></tr>
<tr class="separator:aaa0e0771ad3aa131f09d9334e6c8d617"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8fee7fa61f6d29e7cefc2617a1aa3281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fee7fa61f6d29e7cefc2617a1aa3281">&#9670;&nbsp;</a></span>addRequestToQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addRequestToQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *&#160;</td>
          <td class="paramname"><em>hInternet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a request in the download queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">url</td><td>the url to add to the queue </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad79b15ef33b26196e6a65de6faf5cf3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79b15ef33b26196e6a65de6faf5cf3f">&#9670;&nbsp;</a></span>addToCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addToCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mimeType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cache a file for a given request. </p>
<p>For each cached file, the are two files stored, a .zca and a .zcm containing the downloaded content and the mimeType respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">request</td><td>the url used too fetch the content </td></tr>
    <tr><td class="paramname">content</td><td>the downloaded content </td></tr>
    <tr><td class="paramname">mimeType</td><td>the content mimeType </td></tr>
    <tr><td class="paramname">length</td><td>the content size </td></tr>
    <tr><td class="paramname">filepath</td><td>a buffer for storing the path of the cached file; may be NULL </td></tr>
    <tr><td class="paramname">max_path</td><td>the size of the allocated filepath buffer <br  />
 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a0f57463a06fcec67c66c97b70b3a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0f57463a06fcec67c66c97b70b3a26">&#9670;&nbsp;</a></span>cacheFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cacheFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mimeType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cache a file for a given request. </p>
<p>For each cached file, the are two files stored, a .zca and a .zcm containing the downloaded content and the mimeType respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">request</td><td>the url used too fetch the content </td></tr>
    <tr><td class="paramname">content</td><td>the downloaded content </td></tr>
    <tr><td class="paramname">mimeType</td><td>the content mimeType </td></tr>
    <tr><td class="paramname">length</td><td>the content size </td></tr>
    <tr><td class="paramname">filepath</td><td>a buffer for storing the path of the cached file; may be NULL </td></tr>
    <tr><td class="paramname">max_path</td><td>the size of the allocated filepath buffer <br  />
 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1674744571ba9c0932783cc74d2c0d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1674744571ba9c0932783cc74d2c0d29">&#9670;&nbsp;</a></span>getFilenameForRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* getFilenameForRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a URL by appending every request header listed in the security section.This imply that the URL will contain any authentication informations that should be fowarded to the server from which de input was download. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>the main configuration maps </td></tr>
    <tr><td class="paramname">request</td><td>the URL to transform. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a char* that contain the original URL plus potential header (only for hosts that are not shared). </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Be sure to free the memory returned by this function. </dd></dl>

</div>
</div>
<a id="a8e88258fbad0c34118ec68ef84688098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e88258fbad0c34118ec68ef84688098">&#9670;&nbsp;</a></span>getMd5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* getMd5 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute md5. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>the char* </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a char* representing the md5 of the url </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>make sure to free resources returned by this function </dd></dl>

</div>
</div>
<a id="ae419a5533a6ddaa6f753d91c7e76f71d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae419a5533a6ddaa6f753d91c7e76f71d">&#9670;&nbsp;</a></span>getMd5f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* getMd5f </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute md5 of a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>the char* </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a char* representing the md5 of the url </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>make sure to free resources returned by this function </dd></dl>

</div>
</div>
<a id="a5a75c69161fcac7669b9f061c9289d8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a75c69161fcac7669b9f061c9289d8e">&#9670;&nbsp;</a></span>isInCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* isInCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify if a url is available in the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">request</td><td>the url </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the full name of the cached file if any, NULL in other case </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>make sure to free resources returned by this function (if not NULL) </dd></dl>

</div>
</div>
<a id="aaa0e0771ad3aa131f09d9334e6c8d617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa0e0771ad3aa131f09d9334e6c8d617">&#9670;&nbsp;</a></span>loadRemoteFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int loadRemoteFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmap">map</a> **&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *&#160;</td>
          <td class="paramname"><em>hInternet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to load file from cache or download a remote file if not in cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">content</td><td>the map to update </td></tr>
    <tr><td class="paramname">hInternet</td><td>the <a class="el" href="ulinet_8h.html#structHINTERNET" title="Multiple CURL handlers.">HINTERNET</a> pointer </td></tr>
    <tr><td class="paramname">url</td><td>the url to fetch </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

</div>
</div>
<a id="ac4f8baf18bdee0d5f398c562ac3a625d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f8baf18bdee0d5f398c562ac3a625d">&#9670;&nbsp;</a></span>readCurrentInput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readCurrentInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *&#160;</td>
          <td class="paramname"><em>hInternet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmap">map</a> **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the downloaded file for a specific input. </p>
<p>The map defining the input's metadata should contains, at least, the following fields:</p>
<ul>
<li>Reference: pointing to the URL to acces the resource</li>
<li>Order: couter (starting at 1)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">in</td><td>the input </td></tr>
    <tr><td class="paramname">index</td><td>the input index </td></tr>
    <tr><td class="paramname">hInternet</td><td>the internet connection </td></tr>
    <tr><td class="paramname">error</td><td>the error map pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in case of success, -1 in case of failure </dd></dl>

</div>
</div>
<a id="ac328b98c3b060240d2a22d9569572fd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac328b98c3b060240d2a22d9569572fd4">&#9670;&nbsp;</a></span>runHttpRequests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int runHttpRequests </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmaps">maps</a> **&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ulinet_8h.html#structHINTERNET">HINTERNET</a> *&#160;</td>
          <td class="paramname"><em>hInternet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="service_8h.html#structmap">map</a> **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Effectively run all the HTTP requests in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the maps containing the settings of the main.cfg file </td></tr>
    <tr><td class="paramname">inputs</td><td>the maps containing the inputs (defined in the requests+added per default based on the zcfg file) </td></tr>
    <tr><td class="paramname">hInternet</td><td>the <a class="el" href="ulinet_8h.html#structHINTERNET" title="Multiple CURL handlers.">HINTERNET</a> pointer </td></tr>
    <tr><td class="paramname">error</td><td>the error map pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="aa28466f80bf8485078d2c516b162cfc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa28466f80bf8485078d2c516b162cfc2">&#9670;&nbsp;</a></span>storeMd5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int storeMd5 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 7 2024 15:03:15 for ZOO-Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
